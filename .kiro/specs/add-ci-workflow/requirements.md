# 要件定義書

## 概要

この機能は、プロジェクトにGitHub Actionsを使用したCI（継続的インテグレーション）ワークフローを追加し、コード変更のたびにテスト、リント、フォーマット、Biome checkを並列実行で自動化します。各CIワークフローはPRマージの必須条件として設定され、コードがメインブランチにマージされる前にすべてのチェックが通ることを保証します。

## 要件

### 要件1

**ユーザーストーリー:** 開発者として、プルリクエストごとに自動テストが実行されることで、メインブランチに到達する前にバグやリグレッションを発見したい。

#### 受け入れ基準

1. プルリクエストが作成されたとき、CIシステムはすべてのユニットテストを実行する
2. プルリクエストが更新されたとき、CIシステムはすべてのテストを自動的に再実行する
3. テストが失敗したとき、CIシステムはプルリクエストのマージを防ぐ
4. テストが成功したとき、CIシステムはプルリクエストをレビュー準備完了としてマークする

### 要件2

**ユーザーストーリー:** 開発者として、複数のコード品質チェック（Linter、フォーマット、Biome check）が並列実行されることで、効率的にコード品質を確保したい。

#### 受け入れ基準

1. コードがプッシュされたとき、CIシステムは別々のGitHub Actionsワークフローファイルでリント、フォーマット、Biome checkを並列実行する
2. リントワークフローが実行されるとき、プロジェクトのbiome設定を使用してリントチェックを行う
3. フォーマットワークフローが実行されるとき、コードフォーマットの正確性をチェックする
4. Biome checkワークフローが実行されるとき、Biomeの全体的な品質チェックを実行する
5. いずれかの品質チェックが失敗したとき、該当するワークフローは失敗としてマークされる

### 要件3

**ユーザーストーリー:** プロジェクトメンテナーとして、CIワークフローが複数のNode.jsバージョンで実行されることで、異なる環境での互換性を確保したい。

#### 受け入れ基準

1. CIワークフローが実行されるとき、Node.js LTSバージョン（20.x、22.x）でテストする
2. いずれかのNode.jsバージョンが失敗したとき、全体のビルドは失敗としてマークされる
3. すべてのNode.jsバージョンが成功したとき、ビルドは成功としてマークされる
4. 特定のNode.jsバージョンが利用できない場合、CIシステムは問題を明確に報告する

### 要件4

**ユーザーストーリー:** 開発者として、CIチェックから迅速なフィードバックを得ることで、コード変更を素早く反復したい。

#### 受け入れ基準

1. CIワークフローが開始されるとき、通常の変更に対して5分以内に完了する
2. 依存関係がキャッシュされているとき、後続の実行は最初の実行より高速になる
3. テストが並列化されているとき、総実行時間が最小化される
4. ワークフローが失敗するとき、高速で失敗し、最初の重要なエラーを即座に報告する

### 要件5

**ユーザーストーリー:** プロジェクトメンテナーとして、すべてのCIチェックがPRマージの必須条件となることで、コード品質を確実に保証したい。

#### 受け入れ基準

1. すべてのCIワークフロー（テスト、リント、フォーマット、Biome check）のステータスがGitHubプルリクエストで見える
2. チェックが進行中のとき、各ワークフローのステータスは進行情報とともに「保留中」を表示する
3. チェックが成功したとき、各ワークフローのステータスは緑のチェックマークとともに「成功」を表示する
4. チェックが失敗したとき、該当するワークフローのステータスは詳細なエラー情報とともに「失敗」を表示する
5. すべてのCIワークフロー（テスト、リント、フォーマット、Biome check）がPRマージの必須条件として設定される
6. いずれかのワークフローが失敗している間は、プルリクエストはマージできない
